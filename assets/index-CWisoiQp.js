(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var _n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt={exports:{}};/*! algoliasearch.umd.js | 4.24.0 | Â© Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(e,t){(function(r,a){e.exports=a()})(_n,function(){function r(i,s,c){return s in i?Object.defineProperty(i,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[s]=c,i}function a(i,s){var c=Object.keys(i);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);s&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable})),c.push.apply(c,u)}return c}function n(i){for(var s=1;s<arguments.length;s++){var c=arguments[s]!=null?arguments[s]:{};s%2?a(Object(c),!0).forEach(function(u){r(i,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach(function(u){Object.defineProperty(i,u,Object.getOwnPropertyDescriptor(c,u))})}return i}function o(i,s){if(i==null)return{};var c,u,f=function(j,m){if(j==null)return{};var b,x,P={},w=Object.keys(j);for(x=0;x<w.length;x++)b=w[x],m.indexOf(b)>=0||(P[b]=j[b]);return P}(i,s);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(i);for(u=0;u<v.length;u++)c=v[u],s.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(i,c)&&(f[c]=i[c])}return f}function h(i,s){return function(c){if(Array.isArray(c))return c}(i)||function(c,u){if(Symbol.iterator in Object(c)||Object.prototype.toString.call(c)==="[object Arguments]"){var f=[],v=!0,j=!1,m=void 0;try{for(var b,x=c[Symbol.iterator]();!(v=(b=x.next()).done)&&(f.push(b.value),!u||f.length!==u);v=!0);}catch(P){j=!0,m=P}finally{try{v||x.return==null||x.return()}finally{if(j)throw m}}return f}}(i,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(i){return function(s){if(Array.isArray(s)){for(var c=0,u=new Array(s.length);c<s.length;c++)u[c]=s[c];return u}}(i)||function(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(i){var s,c="algoliasearch-client-js-".concat(i.key),u=function(){return s===void 0&&(s=i.localStorage||window.localStorage),s},f=function(){return JSON.parse(u().getItem(c)||"{}")},v=function(m){u().setItem(c,JSON.stringify(m))},j=function(){var m=i.timeToLive?1e3*i.timeToLive:null,b=f(),x=Object.fromEntries(Object.entries(b).filter(function(w){return h(w,2)[1].timestamp!==void 0}));if(v(x),m){var P=Object.fromEntries(Object.entries(x).filter(function(w){var E=h(w,2)[1],S=new Date().getTime();return!(E.timestamp+m<S)}));v(P)}};return{get:function(m,b){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){j();var P=JSON.stringify(m);return f()[P]}).then(function(P){return Promise.all([P?P.value:b(),P!==void 0])}).then(function(P){var w=h(P,2),E=w[0],S=w[1];return Promise.all([E,S||x.miss(E)])}).then(function(P){return h(P,1)[0]})},set:function(m,b){return Promise.resolve().then(function(){var x=f();return x[JSON.stringify(m)]={timestamp:new Date().getTime(),value:b},u().setItem(c,JSON.stringify(x)),b})},delete:function(m){return Promise.resolve().then(function(){var b=f();delete b[JSON.stringify(m)],u().setItem(c,JSON.stringify(b))})},clear:function(){return Promise.resolve().then(function(){u().removeItem(c)})}}}function p(i){var s=d(i.caches),c=s.shift();return c===void 0?{get:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},j=f();return j.then(function(m){return Promise.all([m,v.miss(m)])}).then(function(m){return h(m,1)[0]})},set:function(u,f){return Promise.resolve(f)},delete:function(u){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(u,f){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return c.get(u,f,v).catch(function(){return p({caches:s}).get(u,f,v)})},set:function(u,f){return c.set(u,f).catch(function(){return p({caches:s}).set(u,f)})},delete:function(u){return c.delete(u).catch(function(){return p({caches:s}).delete(u)})},clear:function(){return c.clear().catch(function(){return p({caches:s}).clear()})}}}function g(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},s={};return{get:function(c,u){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},v=JSON.stringify(c);if(v in s)return Promise.resolve(i.serializable?JSON.parse(s[v]):s[v]);var j=u(),m=f&&f.miss||function(){return Promise.resolve()};return j.then(function(b){return m(b)}).then(function(){return j})},set:function(c,u){return s[JSON.stringify(c)]=i.serializable?JSON.stringify(u):u,Promise.resolve(u)},delete:function(c){return delete s[JSON.stringify(c)],Promise.resolve()},clear:function(){return s={},Promise.resolve()}}}function y(i,s,c){var u={"x-algolia-api-key":c,"x-algolia-application-id":s};return{headers:function(){return i===Q.WithinHeaders?u:{}},queryParameters:function(){return i===Q.WithinQueryParameters?u:{}}}}function _(i){var s=0;return i(function c(){return s++,new Promise(function(u){setTimeout(function(){u(i(c))},Math.min(100*s,1e3))})})}function F(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(c,u){return Promise.resolve()};return Object.assign(i,{wait:function(c){return F(i.then(function(u){return Promise.all([s(u,c),u])}).then(function(u){return u[1]}))}})}function A(i){for(var s=i.length-1;s>0;s--){var c=Math.floor(Math.random()*(s+1)),u=i[s];i[s]=i[c],i[c]=u}return i}function D(i,s){return s&&Object.keys(s).forEach(function(c){i[c]=s[c](i)}),i}function O(i){for(var s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];var f=0;return i.replace(/%s/g,function(){return encodeURIComponent(c[f++])})}var Q={WithinQueryParameters:0,WithinHeaders:1};function H(i,s){var c=i||{},u=c.data||{};return Object.keys(c).forEach(function(f){["timeout","headers","queryParameters","data","cacheable"].indexOf(f)===-1&&(u[f]=c[f])}),{data:Object.entries(u).length>0?u:void 0,timeout:c.timeout||s,headers:c.headers||{},queryParameters:c.queryParameters||{},cacheable:c.cacheable}}var M={Read:1,Write:2,Any:3},V=1,ye=2,ue=3;function re(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:V;return n(n({},i),{},{status:s,lastUpdate:Date.now()})}function tt(i){return typeof i=="string"?{protocol:"https",url:i,accept:M.Any}:{protocol:i.protocol||"https",url:i.url,accept:i.accept||M.Any}}var ne="DELETE",q="GET",T="POST",Oe="PUT";function tr(i,s){return Promise.all(s.map(function(c){return i.get(c,function(){return Promise.resolve(re(c))})})).then(function(c){var u=c.filter(function(j){return function(m){return m.status===V||Date.now()-m.lastUpdate>12e4}(j)}),f=c.filter(function(j){return function(m){return m.status===ue&&Date.now()-m.lastUpdate<=12e4}(j)}),v=[].concat(d(u),d(f));return{getTimeout:function(j,m){return(f.length===0&&j===0?1:f.length+3+j)*m},statelessHosts:v.length>0?v.map(function(j){return tt(j)}):s}})}function rt(i,s,c,u){var f=[],v=function(E,S){if(!(E.method===q||E.data===void 0&&S.data===void 0)){var I=Array.isArray(E.data)?E.data:n(n({},E.data),S.data);return JSON.stringify(I)}}(c,u),j=function(E,S){var I=n(n({},E.headers),S.headers),N={};return Object.keys(I).forEach(function(k){var U=I[k];N[k.toLowerCase()]=U}),N}(i,u),m=c.method,b=c.method!==q?{}:n(n({},c.data),u.data),x=n(n(n({"x-algolia-agent":i.userAgent.value},i.queryParameters),b),u.queryParameters),P=0,w=function E(S,I){var N=S.pop();if(N===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .",transporterStackTrace:it(f)};var k={data:v,headers:j,method:m,url:nr(N,c.path,x),connectTimeout:I(P,i.timeouts.connect),responseTimeout:I(P,u.timeout)},U=function(J){var B={request:k,response:J,host:N,triesLeft:S.length};return f.push(B),B},he={onSuccess:function(J){return function(B){try{return JSON.parse(B.content)}catch(Z){throw function(X,ae){return{name:"DeserializationError",message:X,response:ae}}(Z.message,B)}}(J)},onRetry:function(J){var B=U(J);return J.isTimedOut&&P++,Promise.all([i.logger.info("Retryable failure",st(B)),i.hostsCache.set(N,re(N,J.isTimedOut?ue:ye))]).then(function(){return E(S,I)})},onFail:function(J){throw U(J),function(B,Z){var X=B.content,ae=B.status,de=X;try{de=JSON.parse(X).message}catch{}return function(be,He,xn){return{name:"ApiError",message:be,status:He,transporterStackTrace:xn}}(de,ae,Z)}(J,it(f))}};return i.requester.send(k).then(function(J){return function(B,Z){return function(X){var ae=X.status;return X.isTimedOut||function(de){var be=de.isTimedOut,He=de.status;return!be&&~~He==0}(X)||~~(ae/100)!=2&&~~(ae/100)!=4}(B)?Z.onRetry(B):~~(B.status/100)==2?Z.onSuccess(B):Z.onFail(B)}(J,he)})};return tr(i.hostsCache,s).then(function(E){return w(d(E.statelessHosts).reverse(),E.getTimeout)})}function Ee(i){var s=i.hostsCache,c=i.logger,u=i.requester,f=i.requestsCache,v=i.responsesCache,j=i.timeouts,m=i.userAgent,b=i.hosts,x=i.queryParameters,P={hostsCache:s,logger:c,requester:u,requestsCache:f,responsesCache:v,timeouts:j,userAgent:m,headers:i.headers,queryParameters:x,hosts:b.map(function(w){return tt(w)}),read:function(w,E){var S=H(E,P.timeouts.read),I=function(){return rt(P,P.hosts.filter(function(k){return(k.accept&M.Read)!=0}),w,S)};if((S.cacheable!==void 0?S.cacheable:w.cacheable)!==!0)return I();var N={request:w,mappedRequestOptions:S,transporter:{queryParameters:P.queryParameters,headers:P.headers}};return P.responsesCache.get(N,function(){return P.requestsCache.get(N,function(){return P.requestsCache.set(N,I()).then(function(k){return Promise.all([P.requestsCache.delete(N),k])},function(k){return Promise.all([P.requestsCache.delete(N),Promise.reject(k)])}).then(function(k){var U=h(k,2);return U[0],U[1]})})},{miss:function(k){return P.responsesCache.set(N,k)}})},write:function(w,E){return rt(P,P.hosts.filter(function(S){return(S.accept&M.Write)!=0}),w,H(E,P.timeouts.write))}};return P}function rr(i){var s={value:"Algolia for JavaScript (".concat(i,")"),add:function(c){var u="; ".concat(c.segment).concat(c.version!==void 0?" (".concat(c.version,")"):"");return s.value.indexOf(u)===-1&&(s.value="".concat(s.value).concat(u)),s}};return s}function nr(i,s,c){var u=nt(c),f="".concat(i.protocol,"://").concat(i.url,"/").concat(s.charAt(0)==="/"?s.substr(1):s);return u.length&&(f+="?".concat(u)),f}function nt(i){return Object.keys(i).map(function(s){return O("%s=%s",s,(c=i[s],Object.prototype.toString.call(c)==="[object Object]"||Object.prototype.toString.call(c)==="[object Array]"?JSON.stringify(i[s]):i[s]));var c}).join("&")}function it(i){return i.map(function(s){return st(s)})}function st(i){var s=i.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},i),{},{request:n(n({},i.request),{},{headers:n(n({},i.request.headers),s)})})}var ir=function(i){return function(s,c){return i.transporter.write({method:T,path:"2/abtests",data:s},c)}},sr=function(i){return function(s,c){return i.transporter.write({method:ne,path:O("2/abtests/%s",s)},c)}},ar=function(i){return function(s,c){return i.transporter.read({method:q,path:O("2/abtests/%s",s)},c)}},cr=function(i){return function(s){return i.transporter.read({method:q,path:"2/abtests"},s)}},ur=function(i){return function(s,c){return i.transporter.write({method:T,path:O("2/abtests/%s/stop",s)},c)}},or=function(i){return function(s){return i.transporter.read({method:q,path:"1/strategies/personalization"},s)}},fr=function(i){return function(s,c){return i.transporter.write({method:T,path:"1/strategies/personalization",data:s},c)}};function we(i){return function s(c){return i.request(c).then(function(u){if(i.batch!==void 0&&i.batch(u.hits),!i.shouldStop(u))return u.cursor?s({cursor:u.cursor}):s({page:(c.page||0)+1})})}({})}var hr=function(i){return function(s,c){var u=c||{},f=u.queryParameters,v=o(u,["queryParameters"]),j=n({acl:s},f!==void 0?{queryParameters:f}:{});return F(i.transporter.write({method:T,path:"1/keys",data:j},v),function(m,b){return _(function(x){return oe(i)(m.key,b).catch(function(P){if(P.status!==404)throw P;return x()})})})}},dr=function(i){return function(s,c,u){var f=H(u);return f.queryParameters["X-Algolia-User-ID"]=s,i.transporter.write({method:T,path:"1/clusters/mapping",data:{cluster:c}},f)}},lr=function(i){return function(s,c,u){return i.transporter.write({method:T,path:"1/clusters/mapping/batch",data:{users:s,cluster:c}},u)}},mr=function(i){return function(s,c){return F(i.transporter.write({method:T,path:O("/1/dictionaries/%s/batch",s),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},c),function(u,f){return ie(i)(u.taskID,f)})}},Re=function(i){return function(s,c,u){return F(i.transporter.write({method:T,path:O("1/indexes/%s/operation",s),data:{operation:"copy",destination:c}},u),function(f,v){return fe(i)(s,{methods:{waitTask:$}}).waitTask(f.taskID,v)})}},pr=function(i){return function(s,c,u){return Re(i)(s,c,n(n({},u),{},{scope:[Ae.Rules]}))}},vr=function(i){return function(s,c,u){return Re(i)(s,c,n(n({},u),{},{scope:[Ae.Settings]}))}},gr=function(i){return function(s,c,u){return Re(i)(s,c,n(n({},u),{},{scope:[Ae.Synonyms]}))}},yr=function(i){return function(s,c){return s.method===q?i.transporter.read(s,c):i.transporter.write(s,c)}},Rr=function(i){return function(s,c){return F(i.transporter.write({method:ne,path:O("1/keys/%s",s)},c),function(u,f){return _(function(v){return oe(i)(s,f).then(v).catch(function(j){if(j.status!==404)throw j})})})}},Fr=function(i){return function(s,c,u){var f=c.map(function(v){return{action:"deleteEntry",body:{objectID:v}}});return F(i.transporter.write({method:T,path:O("/1/dictionaries/%s/batch",s),data:{clearExistingDictionaryEntries:!1,requests:f}},u),function(v,j){return ie(i)(v.taskID,j)})}},oe=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/keys/%s",s)},c)}},at=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/task/%s",s.toString())},c)}},br=function(i){return function(s){return i.transporter.read({method:q,path:"/1/dictionaries/*/settings"},s)}},jr=function(i){return function(s){return i.transporter.read({method:q,path:"1/logs"},s)}},Pr=function(i){return function(s){return i.transporter.read({method:q,path:"1/clusters/mapping/top"},s)}},xr=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/clusters/mapping/%s",s)},c)}},_r=function(i){return function(s){var c=s||{},u=c.retrieveMappings,f=o(c,["retrieveMappings"]);return u===!0&&(f.getClusters=!0),i.transporter.read({method:q,path:"1/clusters/mapping/pending"},f)}},fe=function(i){return function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={transporter:i.transporter,appId:i.appId,indexName:s};return D(u,c.methods)}},Or=function(i){return function(s){return i.transporter.read({method:q,path:"1/keys"},s)}},Er=function(i){return function(s){return i.transporter.read({method:q,path:"1/clusters"},s)}},wr=function(i){return function(s){return i.transporter.read({method:q,path:"1/indexes"},s)}},Ir=function(i){return function(s){return i.transporter.read({method:q,path:"1/clusters/mapping"},s)}},Tr=function(i){return function(s,c,u){return F(i.transporter.write({method:T,path:O("1/indexes/%s/operation",s),data:{operation:"move",destination:c}},u),function(f,v){return fe(i)(s,{methods:{waitTask:$}}).waitTask(f.taskID,v)})}},Dr=function(i){return function(s,c){return F(i.transporter.write({method:T,path:"1/indexes/*/batch",data:{requests:s}},c),function(u,f){return Promise.all(Object.keys(u.taskID).map(function(v){return fe(i)(v,{methods:{waitTask:$}}).waitTask(u.taskID[v],f)}))})}},Sr=function(i){return function(s,c){return i.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:s}},c)}},ct=function(i){return function(s,c){var u=s.map(function(f){return n(n({},f),{},{params:nt(f.params||{})})});return i.transporter.read({method:T,path:"1/indexes/*/queries",data:{requests:u},cacheable:!0},c)}},ut=function(i){return function(s,c){return Promise.all(s.map(function(u){var f=u.params,v=f.facetName,j=f.facetQuery,m=o(f,["facetName","facetQuery"]);return fe(i)(u.indexName,{methods:{searchForFacetValues:mt}}).searchForFacetValues(v,j,n(n({},c),m))}))}},Ar=function(i){return function(s,c){var u=H(c);return u.queryParameters["X-Algolia-User-ID"]=s,i.transporter.write({method:ne,path:"1/clusters/mapping"},u)}},Hr=function(i){return function(s,c,u){var f=c.map(function(v){return{action:"addEntry",body:v}});return F(i.transporter.write({method:T,path:O("/1/dictionaries/%s/batch",s),data:{clearExistingDictionaryEntries:!0,requests:f}},u),function(v,j){return ie(i)(v.taskID,j)})}},Nr=function(i){return function(s,c){return F(i.transporter.write({method:T,path:O("1/keys/%s/restore",s)},c),function(u,f){return _(function(v){return oe(i)(s,f).catch(function(j){if(j.status!==404)throw j;return v()})})})}},Qr=function(i){return function(s,c,u){var f=c.map(function(v){return{action:"addEntry",body:v}});return F(i.transporter.write({method:T,path:O("/1/dictionaries/%s/batch",s),data:{clearExistingDictionaryEntries:!1,requests:f}},u),function(v,j){return ie(i)(v.taskID,j)})}},kr=function(i){return function(s,c,u){return i.transporter.read({method:T,path:O("/1/dictionaries/%s/search",s),data:{query:c},cacheable:!0},u)}},qr=function(i){return function(s,c){return i.transporter.read({method:T,path:"1/clusters/mapping/search",data:{query:s}},c)}},Cr=function(i){return function(s,c){return F(i.transporter.write({method:Oe,path:"/1/dictionaries/*/settings",data:s},c),function(u,f){return ie(i)(u.taskID,f)})}},$r=function(i){return function(s,c){var u=Object.assign({},c),f=c||{},v=f.queryParameters,j=o(f,["queryParameters"]),m=v?{queryParameters:v}:{},b=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return F(i.transporter.write({method:Oe,path:O("1/keys/%s",s),data:m},j),function(x,P){return _(function(w){return oe(i)(s,P).then(function(E){return function(S){return Object.keys(u).filter(function(I){return b.indexOf(I)!==-1}).every(function(I){if(Array.isArray(S[I])&&Array.isArray(u[I])){var N=S[I];return N.length===u[I].length&&N.every(function(k,U){return k===u[I][U]})}return S[I]===u[I]})}(E)?Promise.resolve():w()})})})}},ie=function(i){return function(s,c){return _(function(u){return at(i)(s,c).then(function(f){return f.status!=="published"?u():void 0})})}},ot=function(i){return function(s,c){return F(i.transporter.write({method:T,path:O("1/indexes/%s/batch",i.indexName),data:{requests:s}},c),function(u,f){return $(i)(u.taskID,f)})}},Br=function(i){return function(s){return we(n(n({shouldStop:function(c){return c.cursor===void 0}},s),{},{request:function(c){return i.transporter.read({method:T,path:O("1/indexes/%s/browse",i.indexName),data:c},s)}}))}},Lr=function(i){return function(s){var c=n({hitsPerPage:1e3},s);return we(n(n({shouldStop:function(u){return u.hits.length<c.hitsPerPage}},c),{},{request:function(u){return pt(i)("",n(n({},c),u)).then(function(f){return n(n({},f),{},{hits:f.hits.map(function(v){return delete v._highlightResult,v})})})}}))}},Mr=function(i){return function(s){var c=n({hitsPerPage:1e3},s);return we(n(n({shouldStop:function(u){return u.hits.length<c.hitsPerPage}},c),{},{request:function(u){return vt(i)("",n(n({},c),u)).then(function(f){return n(n({},f),{},{hits:f.hits.map(function(v){return delete v._highlightResult,v})})})}}))}},Ie=function(i){return function(s,c,u){var f=u||{},v=f.batchSize,j=o(f,["batchSize"]),m={taskIDs:[],objectIDs:[]};return F(function b(){var x,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,w=[];for(x=P;x<s.length&&(w.push(s[x]),w.length!==(v||1e3));x++);return w.length===0?Promise.resolve(m):ot(i)(w.map(function(E){return{action:c,body:E}}),j).then(function(E){return m.objectIDs=m.objectIDs.concat(E.objectIDs),m.taskIDs.push(E.taskID),x++,b(x)})}(),function(b,x){return Promise.all(b.taskIDs.map(function(P){return $(i)(P,x)}))})}},Vr=function(i){return function(s){return F(i.transporter.write({method:T,path:O("1/indexes/%s/clear",i.indexName)},s),function(c,u){return $(i)(c.taskID,u)})}},Ur=function(i){return function(s){var c=s||{},u=c.forwardToReplicas,f=H(o(c,["forwardToReplicas"]));return u&&(f.queryParameters.forwardToReplicas=1),F(i.transporter.write({method:T,path:O("1/indexes/%s/rules/clear",i.indexName)},f),function(v,j){return $(i)(v.taskID,j)})}},Jr=function(i){return function(s){var c=s||{},u=c.forwardToReplicas,f=H(o(c,["forwardToReplicas"]));return u&&(f.queryParameters.forwardToReplicas=1),F(i.transporter.write({method:T,path:O("1/indexes/%s/synonyms/clear",i.indexName)},f),function(v,j){return $(i)(v.taskID,j)})}},zr=function(i){return function(s,c){return F(i.transporter.write({method:T,path:O("1/indexes/%s/deleteByQuery",i.indexName),data:s},c),function(u,f){return $(i)(u.taskID,f)})}},Wr=function(i){return function(s){return F(i.transporter.write({method:ne,path:O("1/indexes/%s",i.indexName)},s),function(c,u){return $(i)(c.taskID,u)})}},Kr=function(i){return function(s,c){return F(ft(i)([s],c).then(function(u){return{taskID:u.taskIDs[0]}}),function(u,f){return $(i)(u.taskID,f)})}},ft=function(i){return function(s,c){var u=s.map(function(f){return{objectID:f}});return Ie(i)(u,se.DeleteObject,c)}},Gr=function(i){return function(s,c){var u=c||{},f=u.forwardToReplicas,v=H(o(u,["forwardToReplicas"]));return f&&(v.queryParameters.forwardToReplicas=1),F(i.transporter.write({method:ne,path:O("1/indexes/%s/rules/%s",i.indexName,s)},v),function(j,m){return $(i)(j.taskID,m)})}},Xr=function(i){return function(s,c){var u=c||{},f=u.forwardToReplicas,v=H(o(u,["forwardToReplicas"]));return f&&(v.queryParameters.forwardToReplicas=1),F(i.transporter.write({method:ne,path:O("1/indexes/%s/synonyms/%s",i.indexName,s)},v),function(j,m){return $(i)(j.taskID,m)})}},Yr=function(i){return function(s){return ht(i)(s).then(function(){return!0}).catch(function(c){if(c.status!==404)throw c;return!1})}},Zr=function(i){return function(s,c,u){return i.transporter.read({method:T,path:O("1/answers/%s/prediction",i.indexName),data:{query:s,queryLanguages:c},cacheable:!0},u)}},en=function(i){return function(s,c){var u=c||{},f=u.query,v=u.paginate,j=o(u,["query","paginate"]),m=0;return function b(){return lt(i)(f||"",n(n({},j),{},{page:m})).then(function(x){for(var P=0,w=Object.entries(x.hits);P<w.length;P++){var E=h(w[P],2),S=E[0],I=E[1];if(s(I))return{object:I,position:parseInt(S,10),page:m}}if(m++,v===!1||m>=x.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return b()})}()}},tn=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/indexes/%s/%s",i.indexName,s)},c)}},rn=function(){return function(i,s){for(var c=0,u=Object.entries(i.hits);c<u.length;c++){var f=h(u[c],2),v=f[0];if(f[1].objectID===s)return parseInt(v,10)}return-1}},nn=function(i){return function(s,c){var u=c||{},f=u.attributesToRetrieve,v=o(u,["attributesToRetrieve"]),j=s.map(function(m){return n({indexName:i.indexName,objectID:m},f?{attributesToRetrieve:f}:{})});return i.transporter.read({method:T,path:"1/indexes/*/objects",data:{requests:j}},v)}},sn=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/indexes/%s/rules/%s",i.indexName,s)},c)}},ht=function(i){return function(s){return i.transporter.read({method:q,path:O("1/indexes/%s/settings",i.indexName),data:{getVersion:2}},s)}},an=function(i){return function(s,c){return i.transporter.read({method:q,path:O("1/indexes/%s/synonyms/%s",i.indexName,s)},c)}},cn=function(i){return function(s,c){return F(dt(i)([s],c).then(function(u){return{objectID:u.objectIDs[0],taskID:u.taskIDs[0]}}),function(u,f){return $(i)(u.taskID,f)})}},dt=function(i){return function(s,c){var u=c||{},f=u.createIfNotExists,v=o(u,["createIfNotExists"]),j=f?se.PartialUpdateObject:se.PartialUpdateObjectNoCreate;return Ie(i)(s,j,v)}},un=function(i){return function(s,c){var u=c||{},f=u.safe,v=u.autoGenerateObjectIDIfNotExist,j=u.batchSize,m=o(u,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),b=function(I,N,k,U){return F(i.transporter.write({method:T,path:O("1/indexes/%s/operation",I),data:{operation:k,destination:N}},U),function(he,J){return $(i)(he.taskID,J)})},x=Math.random().toString(36).substring(7),P="".concat(i.indexName,"_tmp_").concat(x),w=Te({appId:i.appId,transporter:i.transporter,indexName:P}),E=[],S=b(i.indexName,P,"copy",n(n({},m),{},{scope:["settings","synonyms","rules"]}));return E.push(S),F((f?S.wait(m):S).then(function(){var I=w(s,n(n({},m),{},{autoGenerateObjectIDIfNotExist:v,batchSize:j}));return E.push(I),f?I.wait(m):I}).then(function(){var I=b(P,i.indexName,"move",m);return E.push(I),f?I.wait(m):I}).then(function(){return Promise.all(E)}).then(function(I){var N=h(I,3),k=N[0],U=N[1],he=N[2];return{objectIDs:U.objectIDs,taskIDs:[k.taskID].concat(d(U.taskIDs),[he.taskID])}}),function(I,N){return Promise.all(E.map(function(k){return k.wait(N)}))})}},on=function(i){return function(s,c){return De(i)(s,n(n({},c),{},{clearExistingRules:!0}))}},fn=function(i){return function(s,c){return Se(i)(s,n(n({},c),{},{clearExistingSynonyms:!0}))}},hn=function(i){return function(s,c){return F(Te(i)([s],c).then(function(u){return{objectID:u.objectIDs[0],taskID:u.taskIDs[0]}}),function(u,f){return $(i)(u.taskID,f)})}},Te=function(i){return function(s,c){var u=c||{},f=u.autoGenerateObjectIDIfNotExist,v=o(u,["autoGenerateObjectIDIfNotExist"]),j=f?se.AddObject:se.UpdateObject;if(j===se.UpdateObject){var m=!0,b=!1,x=void 0;try{for(var P,w=s[Symbol.iterator]();!(m=(P=w.next()).done);m=!0)if(P.value.objectID===void 0)return F(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(E){b=!0,x=E}finally{try{m||w.return==null||w.return()}finally{if(b)throw x}}}return Ie(i)(s,j,v)}},dn=function(i){return function(s,c){return De(i)([s],c)}},De=function(i){return function(s,c){var u=c||{},f=u.forwardToReplicas,v=u.clearExistingRules,j=H(o(u,["forwardToReplicas","clearExistingRules"]));return f&&(j.queryParameters.forwardToReplicas=1),v&&(j.queryParameters.clearExistingRules=1),F(i.transporter.write({method:T,path:O("1/indexes/%s/rules/batch",i.indexName),data:s},j),function(m,b){return $(i)(m.taskID,b)})}},ln=function(i){return function(s,c){return Se(i)([s],c)}},Se=function(i){return function(s,c){var u=c||{},f=u.forwardToReplicas,v=u.clearExistingSynonyms,j=u.replaceExistingSynonyms,m=H(o(u,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return f&&(m.queryParameters.forwardToReplicas=1),(j||v)&&(m.queryParameters.replaceExistingSynonyms=1),F(i.transporter.write({method:T,path:O("1/indexes/%s/synonyms/batch",i.indexName),data:s},m),function(b,x){return $(i)(b.taskID,x)})}},lt=function(i){return function(s,c){return i.transporter.read({method:T,path:O("1/indexes/%s/query",i.indexName),data:{query:s},cacheable:!0},c)}},mt=function(i){return function(s,c,u){return i.transporter.read({method:T,path:O("1/indexes/%s/facets/%s/query",i.indexName,s),data:{facetQuery:c},cacheable:!0},u)}},pt=function(i){return function(s,c){return i.transporter.read({method:T,path:O("1/indexes/%s/rules/search",i.indexName),data:{query:s}},c)}},vt=function(i){return function(s,c){return i.transporter.read({method:T,path:O("1/indexes/%s/synonyms/search",i.indexName),data:{query:s}},c)}},mn=function(i){return function(s,c){var u=c||{},f=u.forwardToReplicas,v=H(o(u,["forwardToReplicas"]));return f&&(v.queryParameters.forwardToReplicas=1),F(i.transporter.write({method:Oe,path:O("1/indexes/%s/settings",i.indexName),data:s},v),function(j,m){return $(i)(j.taskID,m)})}},$=function(i){return function(s,c){return _(function(u){return function(f){return function(v,j){return f.transporter.read({method:q,path:O("1/indexes/%s/task/%s",f.indexName,v.toString())},j)}}(i)(s,c).then(function(f){return f.status!=="published"?u():void 0})})}},se={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},Ae={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},pn=1,vn=2,gn=3,Fe=function(i){return function(s,c){var u=s.map(function(f){return n(n({},f),{},{threshold:f.threshold||0})});return i.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:u},cacheable:!0},c)}},yn=function(i){return function(s,c){return Fe(i)(s.map(function(u){return n(n({},u),{},{fallbackParameters:{},model:"bought-together"})}),c)}},Rn=function(i){return function(s,c){return Fe(i)(s.map(function(u){return n(n({},u),{},{model:"related-products"})}),c)}},Fn=function(i){return function(s,c){var u=s.map(function(f){return n(n({},f),{},{model:"trending-facets",threshold:f.threshold||0})});return i.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:u},cacheable:!0},c)}},bn=function(i){return function(s,c){var u=s.map(function(f){return n(n({},f),{},{model:"trending-items",threshold:f.threshold||0})});return i.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:u},cacheable:!0},c)}},jn=function(i){return function(s,c){return Fe(i)(s.map(function(u){return n(n({},u),{},{model:"looking-similar"})}),c)}},Pn=function(i){return function(s,c){var u=s.map(function(f){return n(n({},f),{},{model:"recommended-for-you",threshold:f.threshold||0})});return i.transporter.read({method:T,path:"1/indexes/*/recommendations",data:{requests:u},cacheable:!0},c)}};function gt(i,s,c){var u,f={appId:i,apiKey:s,timeouts:{connect:1,read:2,write:30},requester:{send:function(m){return new Promise(function(b){var x=new XMLHttpRequest;x.open(m.method,m.url,!0),Object.keys(m.headers).forEach(function(S){return x.setRequestHeader(S,m.headers[S])});var P,w=function(S,I){return setTimeout(function(){x.abort(),b({status:0,content:I,isTimedOut:!0})},1e3*S)},E=w(m.connectTimeout,"Connection timeout");x.onreadystatechange=function(){x.readyState>x.OPENED&&P===void 0&&(clearTimeout(E),P=w(m.responseTimeout,"Socket timeout"))},x.onerror=function(){x.status===0&&(clearTimeout(E),clearTimeout(P),b({content:x.responseText||"Network request failed",status:x.status,isTimedOut:!1}))},x.onload=function(){clearTimeout(E),clearTimeout(P),b({content:x.responseText,status:x.status,isTimedOut:!1})},x.send(m.data)})}},logger:(u=gn,{debug:function(m,b){return pn>=u&&console.debug(m,b),Promise.resolve()},info:function(m,b){return vn>=u&&console.info(m,b),Promise.resolve()},error:function(m,b){return console.error(m,b),Promise.resolve()}}),responsesCache:g(),requestsCache:g({serializable:!1}),hostsCache:p({caches:[l({key:"".concat("4.24.0","-").concat(i)}),g()]}),userAgent:rr("4.24.0").add({segment:"Browser"})},v=n(n({},f),c),j=function(){return function(m){return function(b){var x=b.region||"us",P=y(Q.WithinHeaders,b.appId,b.apiKey),w=Ee(n(n({hosts:[{url:"personalization.".concat(x,".algolia.com")}]},b),{},{headers:n(n(n({},P.headers()),{"content-type":"application/json"}),b.headers),queryParameters:n(n({},P.queryParameters()),b.queryParameters)}));return D({appId:b.appId,transporter:w},b.methods)}(n(n(n({},f),m),{},{methods:{getPersonalizationStrategy:or,setPersonalizationStrategy:fr}}))}};return function(m){var b=m.appId,x=y(m.authMode!==void 0?m.authMode:Q.WithinHeaders,b,m.apiKey),P=Ee(n(n({hosts:[{url:"".concat(b,"-dsn.algolia.net"),accept:M.Read},{url:"".concat(b,".algolia.net"),accept:M.Write}].concat(A([{url:"".concat(b,"-1.algolianet.com")},{url:"".concat(b,"-2.algolianet.com")},{url:"".concat(b,"-3.algolianet.com")}]))},m),{},{headers:n(n(n({},x.headers()),{"content-type":"application/x-www-form-urlencoded"}),m.headers),queryParameters:n(n({},x.queryParameters()),m.queryParameters)}));return D({transporter:P,appId:b,addAlgoliaAgent:function(w,E){P.userAgent.add({segment:w,version:E})},clearCache:function(){return Promise.all([P.requestsCache.clear(),P.responsesCache.clear()]).then(function(){})}},m.methods)}(n(n({},v),{},{methods:{search:ct,searchForFacetValues:ut,multipleBatch:Dr,multipleGetObjects:Sr,multipleQueries:ct,copyIndex:Re,copySettings:vr,copySynonyms:gr,copyRules:pr,moveIndex:Tr,listIndices:wr,getLogs:jr,listClusters:Er,multipleSearchForFacetValues:ut,getApiKey:oe,addApiKey:hr,listApiKeys:Or,updateApiKey:$r,deleteApiKey:Rr,restoreApiKey:Nr,assignUserID:dr,assignUserIDs:lr,getUserID:xr,searchUserIDs:qr,listUserIDs:Ir,getTopUserIDs:Pr,removeUserID:Ar,hasPendingMappings:_r,clearDictionaryEntries:mr,deleteDictionaryEntries:Fr,getDictionarySettings:br,getAppTask:at,replaceDictionaryEntries:Hr,saveDictionaryEntries:Qr,searchDictionaryEntries:kr,setDictionarySettings:Cr,waitAppTask:ie,customRequest:yr,initIndex:function(m){return function(b){return fe(m)(b,{methods:{batch:ot,delete:Wr,findAnswers:Zr,getObject:tn,getObjects:nn,saveObject:hn,saveObjects:Te,search:lt,searchForFacetValues:mt,waitTask:$,setSettings:mn,getSettings:ht,partialUpdateObject:cn,partialUpdateObjects:dt,deleteObject:Kr,deleteObjects:ft,deleteBy:zr,clearObjects:Vr,browseObjects:Br,getObjectPosition:rn,findObject:en,exists:Yr,saveSynonym:ln,saveSynonyms:Se,getSynonym:an,searchSynonyms:vt,browseSynonyms:Mr,deleteSynonym:Xr,clearSynonyms:Jr,replaceAllObjects:un,replaceAllSynonyms:fn,searchRules:pt,getRule:sn,deleteRule:Gr,saveRule:dn,saveRules:De,replaceAllRules:on,browseRules:Lr,clearRules:Ur}})}},initAnalytics:function(){return function(m){return function(b){var x=b.region||"us",P=y(Q.WithinHeaders,b.appId,b.apiKey),w=Ee(n(n({hosts:[{url:"analytics.".concat(x,".algolia.com")}]},b),{},{headers:n(n(n({},P.headers()),{"content-type":"application/json"}),b.headers),queryParameters:n(n({},P.queryParameters()),b.queryParameters)}));return D({appId:b.appId,transporter:w},b.methods)}(n(n(n({},f),m),{},{methods:{addABTest:ir,getABTest:ar,getABTests:cr,stopABTest:ur,deleteABTest:sr}}))}},initPersonalization:j,initRecommendation:function(){return function(m){return v.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),j()(m)}},getRecommendations:Fe,getFrequentlyBoughtTogether:yn,getLookingSimilar:jn,getRecommendedForYou:Pn,getRelatedProducts:Rn,getTrendingFacets:Fn,getTrendingItems:bn}}))}return gt.version="4.24.0",gt})})(Tt);var On=Tt.exports;const En=It(On);function L(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Dt=L;L.prototype._events=void 0;L.prototype._maxListeners=void 0;L.defaultMaxListeners=10;L.prototype.setMaxListeners=function(e){if(!wn(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};L.prototype.emit=function(e){var t,r,a,n,o,h;if(this._events||(this._events={}),e==="error"&&(!this._events.error||pe(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(r=this._events[e],St(r))return!1;if(G(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(pe(r))for(n=Array.prototype.slice.call(arguments,1),h=r.slice(),a=h.length,o=0;o<a;o++)h[o].apply(this,n);return!0};L.prototype.addListener=function(e,t){var r;if(!G(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,G(t.listener)?t.listener:t),this._events[e]?pe(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,pe(this._events[e])&&!this._events[e].warned&&(St(this._maxListeners)?r=L.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};L.prototype.on=L.prototype.addListener;L.prototype.once=function(e,t){if(!G(t))throw TypeError("listener must be a function");var r=!1;function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this};L.prototype.removeListener=function(e,t){var r,a,n,o;if(!G(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,a=-1,r===t||G(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(pe(r)){for(o=n;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){a=o;break}if(a<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};L.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],G(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};L.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:G(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};L.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(G(t))return 1;if(t)return t.length}return 0};L.listenerCount=function(e,t){return e.listenerCount(t)};function G(e){return typeof e=="function"}function wn(e){return typeof e=="number"}function pe(e){return typeof e=="object"&&e!==null}function St(e){return e===void 0}function In(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}var At=In,Tn=Dt,Dn=At;function ve(e,t,r){this.main=e,this.fn=t,this.recommendFn=r,this.lastResults=null,this.lastRecommendResults=null}Dn(ve,Tn);ve.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};ve.prototype.getModifiedState=function(e){return this.fn(e)};ve.prototype.getModifiedRecommendState=function(e){return this.recommendFn(e)};var Sn=ve;function An(e){return typeof e!="string"?e:String(e).replace(/^-/,"\\-")}function Hn(e){return typeof e!="string"?e:e.replace(/^\\-/,"-")}var We={escapeFacetValue:An,unescapeFacetValue:Hn};function Nn(e){return typeof e=="object"&&e!==null?Ke(Array.isArray(e)?[]:{},e):e}function je(e){return typeof e=="function"||Array.isArray(e)||Object.prototype.toString.call(e)==="[object Object]"}function Ke(e,t){if(e===t)return e;for(var r in t)if(!(!Object.prototype.hasOwnProperty.call(t,r)||r==="__proto__"||r==="constructor")){var a=t[r],n=e[r];typeof n<"u"&&typeof a>"u"||(je(n)&&je(a)?e[r]=Ke(n,a):e[r]=Nn(a))}return e}function Qn(e){je(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var a=arguments[t];je(a)&&Ke(e,a)}return e}var xe=Qn;function kn(e){return e&&Object.keys(e).length>0}var Ge=kn;function qn(e,t){if(e===null)return{};var r={},a=Object.keys(e),n,o;for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var Xe=qn;function me(e){e=e||{},this.params=e.params||[]}me.prototype={constructor:me,addParams:function(e){var t=this.params.slice();return t.push(e),new me({params:t})},removeParams:function(e){return new me({params:this.params.filter(function(t){return t.$$id!==e})})},addFrequentlyBoughtTogether:function(e){return this.addParams(Object.assign({},e,{model:"bought-together"}))},addRelatedProducts:function(e){return this.addParams(Object.assign({},e,{model:"related-products"}))},addTrendingItems:function(e){return this.addParams(Object.assign({},e,{model:"trending-items"}))},addTrendingFacets:function(e){return this.addParams(Object.assign({},e,{model:"trending-facets"}))},addLookingSimilar:function(e){return this.addParams(Object.assign({},e,{model:"looking-similar"}))},_buildQueries:function(e,t){return this.params.filter(function(r){return t[r.$$id]===void 0}).map(function(r){var a=Object.assign({},r,{indexName:e,threshold:r.threshold||0});return delete a.$$id,a})}};var Ht=me;function Le(e,t){this._state=e,this._rawResults={};var r=this;e.params.forEach(function(a){var n=a.$$id;r[n]=t[n],r._rawResults[n]=t[n]})}Le.prototype={constructor:Le};var Nt=Le,Ne=xe;function Qe(e){return Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{})}var W={_getQueries:function(t,r){var a=[];return a.push({indexName:t,params:W._getHitsSearchParams(r)}),r.getRefinedDisjunctiveFacets().forEach(function(n){a.push({indexName:t,params:W._getDisjunctiveFacetSearchParams(r,n)})}),r.getRefinedHierarchicalFacets().forEach(function(n){var o=r.getHierarchicalFacetByName(n),h=r.getHierarchicalRefinement(n),d=r._getHierarchicalFacetSeparator(o);if(h.length>0&&h[0].split(d).length>1){var l=h[0].split(d).slice(0,-1).reduce(function(g,y,_){return g.concat({attribute:o.attributes[_],value:_===0?y:[g[g.length-1].value,y].join(d)})},[]);l.forEach(function(p,g){var y=W._getDisjunctiveFacetSearchParams(r,p.attribute,g===0);function _(D){return o.attributes.some(function(O){return O===D.split(":")[0]})}var F=(y.facetFilters||[]).reduce(function(D,O){if(Array.isArray(O)){var Q=O.filter(function(H){return!_(H)});Q.length>0&&D.push(Q)}return typeof O=="string"&&!_(O)&&D.push(O),D},[]),A=l[g-1];g>0?y.facetFilters=F.concat(A.attribute+":"+A.value):F.length>0?y.facetFilters=F:delete y.facetFilters,a.push({indexName:t,params:y})})}}),a},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(W._getHitsHierarchicalFacetsAttributes(e)).sort(),r=W._getFacetFilters(e),a=W._getNumericFilters(e),n=W._getTagFilters(e),o={};return t.length>0&&(o.facets=t.indexOf("*")>-1?["*"]:t),n.length>0&&(o.tagFilters=n),r.length>0&&(o.facetFilters=r),a.length>0&&(o.numericFilters=a),Qe(Ne({},e.getQueryParams(),o))},_getDisjunctiveFacetSearchParams:function(e,t,r){var a=W._getFacetFilters(e,t,r),n=W._getNumericFilters(e,t),o=W._getTagFilters(e),h={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};o.length>0&&(h.tagFilters=o);var d=e.getHierarchicalFacetByName(t);return d?h.facets=W._getDisjunctiveHierarchicalFacetAttribute(e,d,r):h.facets=t,n.length>0&&(h.numericFilters=n),a.length>0&&(h.facetFilters=a),Qe(Ne({},e.getQueryParams(),h))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var r=[];return Object.keys(e.numericRefinements).forEach(function(a){var n=e.numericRefinements[a]||{};Object.keys(n).forEach(function(o){var h=n[o]||[];t!==a&&h.forEach(function(d){if(Array.isArray(d)){var l=d.map(function(p){return a+o+p});r.push(l)}else r.push(a+o+d)})})}),r},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,r){var a=[],n=e.facetsRefinements||{};Object.keys(n).sort().forEach(function(l){var p=n[l]||[];p.slice().sort().forEach(function(g){a.push(l+":"+g)})});var o=e.facetsExcludes||{};Object.keys(o).sort().forEach(function(l){var p=o[l]||[];p.sort().forEach(function(g){a.push(l+":-"+g)})});var h=e.disjunctiveFacetsRefinements||{};Object.keys(h).sort().forEach(function(l){var p=h[l]||[];if(!(l===t||!p||p.length===0)){var g=[];p.slice().sort().forEach(function(y){g.push(l+":"+y)}),a.push(g)}});var d=e.hierarchicalFacetsRefinements||{};return Object.keys(d).sort().forEach(function(l){var p=d[l]||[],g=p[0];if(g!==void 0){var y=e.getHierarchicalFacetByName(l),_=e._getHierarchicalFacetSeparator(y),F=e._getHierarchicalRootPath(y),A,D;if(t===l){if(g.indexOf(_)===-1||!F&&r===!0||F&&F.split(_).length===g.split(_).length)return;F?(D=F.split(_).length-1,g=F):(D=g.split(_).length-2,g=g.slice(0,g.lastIndexOf(_))),A=y.attributes[D]}else D=g.split(_).length-1,A=y.attributes[D];A&&a.push([A+":"+g])}}),a},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return e.hierarchicalFacets.reduce(function(a,n){var o=e.getHierarchicalRefinement(n.name)[0];if(!o)return a.push(n.attributes[0]),a;var h=e._getHierarchicalFacetSeparator(n),d=o.split(h).length,l=n.attributes.slice(0,d+1);return a.concat(l)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var a=e._getHierarchicalFacetSeparator(t);if(r===!0){var n=e._getHierarchicalRootPath(t),o=0;return n&&(o=n.split(a).length),[t.attributes[o]]}var h=e.getHierarchicalRefinement(t.name)[0]||"",d=h.split(a).length-1;return t.attributes.slice(0,d+1)},getSearchForFacetQuery:function(e,t,r,a){var n=a.isDisjunctiveFacet(e)?a.clearRefinements(e):a,o={facetQuery:t,facetName:e};return typeof r=="number"&&(o.maxFacetHits=r),Qe(Ne({},W._getHitsSearchParams(n),o))}},Cn=W,Ye=function(){var t=Array.prototype.slice.call(arguments);return t.reduceRight(function(r,a){return Object.keys(Object(a)).forEach(function(n){a[n]!==void 0&&(r[n]!==void 0&&delete r[n],r[n]=a[n])}),r},{})},ge=function(t,r){if(Array.isArray(t)){for(var a=0;a<t.length;a++)if(r(t[a]))return t[a]}};function $n(e,t){return e.filter(function(r,a){return t.indexOf(r)>-1&&e.indexOf(r)===a})}var Bn=$n;function Qt(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(Qt);throw new Error("The value should be a number, a parsable string or an array of those.")}var Ln=Qt,Mn=function(t){return t===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(t)},Vn=Ye,Un=Ge,Jn=Xe,ee={addRefinement:function(t,r,a){if(ee.isRefined(t,r,a))return t;var n=""+a,o=t[r]?t[r].concat(n):[n],h={};return h[r]=o,Vn({},h,t)},removeRefinement:function(t,r,a){if(a===void 0)return ee.clearRefinement(t,function(o,h){return r===h});var n=""+a;return ee.clearRefinement(t,function(o,h){return r===h&&n===o})},toggleRefinement:function(t,r,a){if(a===void 0)throw new Error("toggleRefinement should be used with a value");return ee.isRefined(t,r,a)?ee.removeRefinement(t,r,a):ee.addRefinement(t,r,a)},clearRefinement:function(t,r,a){if(r===void 0)return Un(t)?{}:t;if(typeof r=="string")return Jn(t,[r]);if(typeof r=="function"){var n=!1,o=Object.keys(t).reduce(function(h,d){var l=t[d]||[],p=l.filter(function(g){return!r(g,d,a)});return p.length!==l.length&&(n=!0),h[d]=p,h},{});return n?o:t}},isRefined:function(t,r,a){var n=!!t[r]&&t[r].length>0;if(a===void 0||!n)return n;var o=""+a;return t[r].indexOf(o)!==-1}},zn=ee,ke=Ye,kt=ge,yt=Bn,Me=xe,Ve=Ge,Rt=Xe,qe=Ln,Wn=Mn,C=zn;function Ze(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(r,a){return Ze(t[a],r)}):e===t}function Kn(e,t){return kt(e,function(r){return Ze(r,t)})}function z(e){var t=e?z._parseNumbers(e):{};t.userToken!==void 0&&!Wn(t.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var r=this;Object.keys(t).forEach(function(a){var n=z.PARAMETERS.indexOf(a)!==-1,o=t[a]!==void 0;!n&&o&&(r[a]=t[a])})}z.PARAMETERS=Object.keys(new z);z._parseNumbers=function(e){if(e instanceof z)return e;var t={},r=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(r.forEach(function(n){var o=e[n];if(typeof o=="string"){var h=parseFloat(o);t[n]=isNaN(h)?o:h}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(n){return Array.isArray(n)?n.map(function(o){return parseFloat(o)}):n})),e.numericRefinements){var a={};Object.keys(e.numericRefinements).forEach(function(n){var o=e.numericRefinements[n]||{};a[n]={},Object.keys(o).forEach(function(h){var d=o[h],l=d.map(function(p){return Array.isArray(p)?p.map(function(g){return typeof g=="string"?parseFloat(g):g}):typeof p=="string"?parseFloat(p):p});a[n][h]=l})}),t.numericRefinements=a}return Me(e,t)};z.make=function(t){var r=new z(t),a=t.hierarchicalFacets||[];return a.forEach(function(n){if(n.rootPath){var o=r.getHierarchicalRefinement(n.name);o.length>0&&o[0].indexOf(n.rootPath)!==0&&(r=r.clearRefinements(n.name)),o=r.getHierarchicalRefinement(n.name),o.length===0&&(r=r.toggleHierarchicalFacetRefinement(n.name,n.rootPath))}}),r};z.validate=function(e,t){var r=t||{};return e.tagFilters&&r.tagRefinements&&r.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&r.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&r.numericRefinements&&Ve(r.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):Ve(e.numericRefinements)&&r.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};z.prototype={constructor:z,clearRefinements:function(t){var r={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:C.clearRefinement(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:C.clearRefinement(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:C.clearRefinement(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:C.clearRefinement(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return r.numericRefinements===this.numericRefinements&&r.facetsRefinements===this.facetsRefinements&&r.facetsExcludes===this.facetsExcludes&&r.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&r.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(r)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(e,t,r){var a=qe(r);if(this.isNumericRefined(e,t,a))return this;var n=Me({},this.numericRefinements);return n[e]=Me({},n[e]),n[e][t]?(n[e][t]=n[e][t].slice(),n[e][t].push(a)):n[e][t]=[a],this.setQueryParameters({numericRefinements:n})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsRefinements[e]||[]:[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)?this.disjunctiveFacetsRefinements[e]||[]:[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsExcludes[e]||[]:[]},removeNumericRefinement:function(e,t,r){var a=r;return a!==void 0?this.isNumericRefined(e,t,a)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,o){return o===e&&n.op===t&&Ze(n.val,qe(a))})}):this:t!==void 0?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,o){return o===e&&n.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,o){return o===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(t){if(t===void 0)return Ve(this.numericRefinements)?{}:this.numericRefinements;if(typeof t=="string")return Rt(this.numericRefinements,[t]);if(typeof t=="function"){var r=!1,a=this.numericRefinements,n=Object.keys(a).reduce(function(o,h){var d=a[h],l={};return d=d||{},Object.keys(d).forEach(function(p){var g=d[p]||[],y=[];g.forEach(function(_){var F=t({val:_,op:p},h,"numeric");F||y.push(_)}),y.length!==g.length&&(r=!0),l[p]=y}),o[h]=l,o},{});return r?n:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return C.isRefined(this.facetsRefinements,t,r)?this:this.setQueryParameters({facetsRefinements:C.addRefinement(this.facetsRefinements,t,r)})},addExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return C.isRefined(this.facetsExcludes,t,r)?this:this.setQueryParameters({facetsExcludes:C.addRefinement(this.facetsExcludes,t,r)})},addDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return C.isRefined(this.disjunctiveFacetsRefinements,t,r)?this:this.setQueryParameters({disjunctiveFacetsRefinements:C.addRefinement(this.disjunctiveFacetsRefinements,t,r)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(r)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(r){return r!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(r){return r!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(r){return r.name!==t})}):this},removeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return C.isRefined(this.facetsRefinements,t,r)?this.setQueryParameters({facetsRefinements:C.removeRefinement(this.facetsRefinements,t,r)}):this},removeExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return C.isRefined(this.facetsExcludes,t,r)?this.setQueryParameters({facetsExcludes:C.removeRefinement(this.facetsExcludes,t,r)}):this},removeDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return C.isRefined(this.disjunctiveFacetsRefinements,t,r)?this.setQueryParameters({disjunctiveFacetsRefinements:C.removeRefinement(this.disjunctiveFacetsRefinements,t,r)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.filter(function(a){return a!==t})};return this.setQueryParameters(r)},toggleRefinement:function(t,r){return this.toggleFacetRefinement(t,r)},toggleFacetRefinement:function(t,r){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,r);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,r);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,r);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:C.toggleRefinement(this.facetsRefinements,t,r)})},toggleExcludeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:C.toggleRefinement(this.facetsExcludes,t,r)})},toggleDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:C.toggleRefinement(this.disjunctiveFacetsRefinements,t,r)})},toggleHierarchicalFacetRefinement:function(t,r){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var a=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),n={},o=this.hierarchicalFacetsRefinements[t]!==void 0&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===r||this.hierarchicalFacetsRefinements[t][0].indexOf(r+a)===0);return o?r.indexOf(a)===-1?n[t]=[]:n[t]=[r.slice(0,r.lastIndexOf(a))]:n[t]=[r],this.setQueryParameters({hierarchicalFacetsRefinements:ke({},n,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var r={};return r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:ke({},r,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:ke({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return this.getHierarchicalFacetByName(e)!==void 0},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(t,r){return this.isConjunctiveFacet(t)?C.isRefined(this.facetsRefinements,t,r):!1},isExcludeRefined:function(t,r){return this.isConjunctiveFacet(t)?C.isRefined(this.facetsExcludes,t,r):!1},isDisjunctiveFacetRefined:function(t,r){return this.isDisjunctiveFacet(t)?C.isRefined(this.disjunctiveFacetsRefinements,t,r):!1},isHierarchicalFacetRefined:function(t,r){if(!this.isHierarchicalFacet(t))return!1;var a=this.getHierarchicalRefinement(t);return r?a.indexOf(r)!==-1:a.length>0},isNumericRefined:function(t,r,a){if(a===void 0&&r===void 0)return!!this.numericRefinements[t];var n=this.numericRefinements[t]&&this.numericRefinements[t][r]!==void 0;if(a===void 0||!n)return n;var o=qe(a),h=Kn(this.numericRefinements[t][r],o)!==void 0;return n&&h},isTagRefined:function(t){return this.tagRefinements.indexOf(t)!==-1},getRefinedDisjunctiveFacets:function(){var t=this,r=yt(Object.keys(this.numericRefinements).filter(function(a){return Object.keys(t.numericRefinements[a]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(a){return t.disjunctiveFacetsRefinements[a].length>0}).concat(r).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return yt(this.hierarchicalFacets.map(function(r){return r.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(r){return t.hierarchicalFacetsRefinements[r].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return e.indexOf(t)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,r={},a=this;return Object.keys(this).forEach(function(n){var o=a[n];t.indexOf(n)===-1&&o!==void 0&&(r[n]=o)}),r},setQueryParameter:function(t,r){if(this[t]===r)return this;var a={};return a[t]=r,this.setQueryParameters(a)},setQueryParameters:function(t){if(!t)return this;var r=z.validate(this,t);if(r)throw r;var a=this,n=z._parseNumbers(t),o=Object.keys(this).reduce(function(d,l){return d[l]=a[l],d},{}),h=Object.keys(n).reduce(function(d,l){var p=d[l]!==void 0,g=n[l]!==void 0;return p&&!g?Rt(d,[l]):(g&&(d[l]=n[l]),d)},o);return new this.constructor(h)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return typeof e.showParentLevel=="boolean"?e.showParentLevel:!0},getHierarchicalFacetByName:function(e){return kt(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),a=t.split(r);return a.map(function(n){return n.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var qt=z,Gn=function(t){return Array.isArray(t)?t.filter(Boolean):[]},Xn=function(t,r){if(!Array.isArray(t))return-1;for(var a=0;a<t.length;a++)if(r(t[a]))return a;return-1},Yn=ge,Ct=function(t,r){var a=(r||[]).map(function(n){return n.split(":")});return t.reduce(function(o,h){var d=h.split(":"),l=Yn(a,function(p){return p[0]===d[0]});return d.length>1||!l?(o[0].push(d[0]),o[1].push(d[1]),o):(o[0].push(l[0]),o[1].push(l[1]),o)},[[],[]])};function Zn(e,t){if(e!==t){var r=e!==void 0,a=e===null,n=t!==void 0,o=t===null;if(!o&&e>t||a&&n||!r)return 1;if(!a&&e<t||o&&r||!n)return-1}return 0}function ei(e,t,r){if(!Array.isArray(e))return[];Array.isArray(r)||(r=[]);var a=e.map(function(n,o){return{criteria:t.map(function(h){return n[h]}),index:o,value:n}});return a.sort(function(o,h){for(var d=-1;++d<o.criteria.length;){var l=Zn(o.criteria[d],h.criteria[d]);if(l)return d>=r.length?l:r[d]==="desc"?-l:l}return o.index-h.index}),a.map(function(n){return n.value})}var $t=ei,ti=ci,Bt=We,ri=ge,ni=Ct,ii=$t,si=Bt.escapeFacetValue,ai=Bt.unescapeFacetValue;function ci(e){return function(r,a){var n=e.hierarchicalFacets[a],o=e.hierarchicalFacetsRefinements[n.name]&&e.hierarchicalFacetsRefinements[n.name][0]||"",h=e._getHierarchicalFacetSeparator(n),d=e._getHierarchicalRootPath(n),l=e._getHierarchicalShowParentLevel(n),p=ni(e._getHierarchicalFacetSortBy(n)),g=r.every(function(F){return F.exhaustive}),y=ui(p,h,d,l,o),_=r;return d&&(_=r.slice(d.split(h).length)),_.reduce(y,{name:e.hierarchicalFacets[a].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:g,data:null})}}function ui(e,t,r,a,n){return function(h,d,l){var p=h;if(l>0){var g=0;for(p=h;g<l;){var y=p&&Array.isArray(p.data)?p.data:[];p=ri(y,function(F){return F.isRefined}),g++}}if(p){var _=Object.keys(d.data).map(function(F){return[F,d.data[F]]}).filter(function(F){var A=F[0];return oi(A,p.path||r,n,t,r,a)});p.data=ii(_.map(function(F){var A=F[0],D=F[1];return fi(D,A,t,ai(n),d.exhaustive)}),e[0],e[1])}return h}}function oi(e,t,r,a,n,o){return n&&(e.indexOf(n)!==0||n===e)?!1:!n&&e.indexOf(a)===-1||n&&e.split(a).length-n.split(a).length===1||e.indexOf(a)===-1&&r.indexOf(a)===-1||r.indexOf(e)===0||e.indexOf(t+a)===0&&(o||e.indexOf(r)===0)}function fi(e,t,r,a,n){var o=t.split(r);return{name:o[o.length-1].trim(),path:t,escapedValue:si(t),count:e,isRefined:a===t||a.indexOf(t+r)===0,exhaustive:n,data:null}}var Ce=Gn,Pe=Ye,Lt=We,K=ge,le=Xn,hi=Ct,Ft=xe,Mt=$t,bt=Lt.escapeFacetValue,Vt=Lt.unescapeFacetValue,di=ti;function jt(e){var t={};return e.forEach(function(r,a){t[r]=a}),t}function $e(e,t,r){t&&t[r]&&(e.stats=t[r])}function li(e,t){return K(e,function(a){var n=a.attributes||[];return n.indexOf(t)>-1})}function Y(e,t,r){var a=t[0]||{};this._rawResults=t;var n=this;Object.keys(a).forEach(function(y){n[y]=a[y]});var o=Ft({persistHierarchicalRootCount:!1},r);Object.keys(o).forEach(function(y){n[y]=o[y]}),this.processingTimeMS=t.reduce(function(y,_){return _.processingTimeMS===void 0?y:y+_.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var h=e.getRefinedDisjunctiveFacets(),d=jt(e.facets),l=jt(e.disjunctiveFacets),p=1,g=a.facets||{};Object.keys(g).forEach(function(y){var _=g[y],F=li(e.hierarchicalFacets,y);if(F){var A=F.attributes.indexOf(y),D=le(e.hierarchicalFacets,function(M){return M.name===F.name});n.hierarchicalFacets[D][A]={attribute:y,data:_,exhaustive:a.exhaustiveFacetsCount}}else{var O=e.disjunctiveFacets.indexOf(y)!==-1,Q=e.facets.indexOf(y)!==-1,H;O&&(H=l[y],n.disjunctiveFacets[H]={name:y,data:_,exhaustive:a.exhaustiveFacetsCount},$e(n.disjunctiveFacets[H],a.facets_stats,y)),Q&&(H=d[y],n.facets[H]={name:y,data:_,exhaustive:a.exhaustiveFacetsCount},$e(n.facets[H],a.facets_stats,y))}}),this.hierarchicalFacets=Ce(this.hierarchicalFacets),h.forEach(function(y){var _=t[p],F=_&&_.facets?_.facets:{},A=e.getHierarchicalFacetByName(y);Object.keys(F).forEach(function(D){var O=F[D],Q;if(A){Q=le(e.hierarchicalFacets,function(V){return V.name===A.name});var H=le(n.hierarchicalFacets[Q],function(V){return V.attribute===D});if(H===-1)return;n.hierarchicalFacets[Q][H].data=Ft({},n.hierarchicalFacets[Q][H].data,O)}else{Q=l[D];var M=a.facets&&a.facets[D]||{};n.disjunctiveFacets[Q]={name:D,data:Pe({},O,M),exhaustive:_.exhaustiveFacetsCount},$e(n.disjunctiveFacets[Q],_.facets_stats,D),e.disjunctiveFacetsRefinements[D]&&e.disjunctiveFacetsRefinements[D].forEach(function(V){!n.disjunctiveFacets[Q].data[V]&&e.disjunctiveFacetsRefinements[D].indexOf(Vt(V))>-1&&(n.disjunctiveFacets[Q].data[V]=0)})}}),p++}),e.getRefinedHierarchicalFacets().forEach(function(y){var _=e.getHierarchicalFacetByName(y),F=e._getHierarchicalFacetSeparator(_),A=e.getHierarchicalRefinement(y);A.length===0||A[0].split(F).length<2||t.slice(p).forEach(function(D){var O=D&&D.facets?D.facets:{};Object.keys(O).forEach(function(Q){var H=O[Q],M=le(e.hierarchicalFacets,function(re){return re.name===_.name}),V=le(n.hierarchicalFacets[M],function(re){return re.attribute===Q});if(V!==-1){var ye={};if(A.length>0&&!n.persistHierarchicalRootCount){var ue=A[0].split(F)[0];ye[ue]=n.hierarchicalFacets[M][V].data[ue]}n.hierarchicalFacets[M][V].data=Pe(ye,H,n.hierarchicalFacets[M][V].data)}}),p++})}),Object.keys(e.facetsExcludes).forEach(function(y){var _=e.facetsExcludes[y],F=d[y];n.facets[F]={name:y,data:g[y],exhaustive:a.exhaustiveFacetsCount},_.forEach(function(A){n.facets[F]=n.facets[F]||{name:y},n.facets[F].data=n.facets[F].data||{},n.facets[F].data[A]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(di(e)),this.facets=Ce(this.facets),this.disjunctiveFacets=Ce(this.disjunctiveFacets),this._state=e}Y.prototype.getFacetByName=function(e){function t(r){return r.name===e}return K(this.facets,t)||K(this.disjunctiveFacets,t)||K(this.hierarchicalFacets,t)};function mi(e,t){function r(g){return g.name===t}if(e._state.isConjunctiveFacet(t)){var a=K(e.facets,r);return a?Object.keys(a.data).map(function(g){var y=bt(g);return{name:g,escapedValue:y,count:a.data[g],isRefined:e._state.isFacetRefined(t,y),isExcluded:e._state.isExcludeRefined(t,g)}}):[]}else if(e._state.isDisjunctiveFacet(t)){var n=K(e.disjunctiveFacets,r);return n?Object.keys(n.data).map(function(g){var y=bt(g);return{name:g,escapedValue:y,count:n.data[g],isRefined:e._state.isDisjunctiveFacetRefined(t,y)}}):[]}else if(e._state.isHierarchicalFacet(t)){var o=K(e.hierarchicalFacets,r);if(!o)return o;var h=e._state.getHierarchicalFacetByName(t),d=e._state._getHierarchicalFacetSeparator(h),l=Vt(e._state.getHierarchicalRefinement(t)[0]||"");l.indexOf(h.rootPath)===0&&(l=l.replace(h.rootPath+d,""));var p=l.split(d);return p.unshift(t),Ut(o,p,0),o}}function Ut(e,t,r){e.isRefined=e.name===(t[r]&&t[r].trim()),e.data&&e.data.forEach(function(a){Ut(a,t,r+1)})}function Jt(e,t,r,a){if(a=a||0,Array.isArray(t))return e(t,r[a]);if(!t.data||t.data.length===0)return t;var n=t.data.map(function(d){return Jt(e,d,r,a+1)}),o=e(n,r[a]),h=Pe({data:o},t);return h}Y.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function pi(e,t){return t.sort(e)}function vi(e,t){var r=[],a=[],n=t.hide||[],o=t.order||[],h=o.reduce(function(p,g,y){return p[g]=y,p},{});e.forEach(function(p){var g=p.path||p.name,y=n.indexOf(g)>-1;!y&&h[g]!==void 0?r[h[g]]=p:y||a.push(p)}),r=r.filter(function(p){return p});var d=t.sortRemainingBy,l;return d==="hidden"?r:(d==="alpha"?l=[["path","name"],["asc","asc"]]:l=[["count"],["desc"]],r.concat(Mt(a,l[0],l[1])))}function gi(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}Y.prototype.getFacetValues=function(e,t){var r=mi(this,e);if(r){var a=Pe({},t,{sortBy:Y.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),n=this,o;if(Array.isArray(r))o=[e];else{var h=n._state.getHierarchicalFacetByName(r.name);o=h.attributes}return Jt(function(d,l){if(a.facetOrdering){var p=gi(n,l);if(p)return vi(d,p)}if(Array.isArray(a.sortBy)){var g=hi(a.sortBy,Y.DEFAULT_SORT);return Mt(d,g[0],g[1])}else if(typeof a.sortBy=="function")return pi(a.sortBy,d);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,o)}};Y.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return Pt(this.facets,e);if(this._state.isDisjunctiveFacet(e))return Pt(this.disjunctiveFacets,e)};function Pt(e,t){var r=K(e,function(a){return a.name===t});return r&&r.stats}Y.prototype.getRefinements=function(){var e=this._state,t=this,r=[];return Object.keys(e.facetsRefinements).forEach(function(a){e.facetsRefinements[a].forEach(function(n){r.push(Be(e,"facet",a,n,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(a){e.facetsExcludes[a].forEach(function(n){r.push(Be(e,"exclude",a,n,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(a){e.disjunctiveFacetsRefinements[a].forEach(function(n){r.push(Be(e,"disjunctive",a,n,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(a){e.hierarchicalFacetsRefinements[a].forEach(function(n){r.push(yi(e,a,n,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(a){var n=e.numericRefinements[a];Object.keys(n).forEach(function(o){n[o].forEach(function(h){r.push({type:"numeric",attributeName:a,name:h,numericValue:h,operator:o})})})}),e.tagRefinements.forEach(function(a){r.push({type:"tag",attributeName:"_tags",name:a})}),r};function Be(e,t,r,a,n){var o=K(n,function(l){return l.name===r}),h=o&&o.data&&o.data[a]?o.data[a]:0,d=o&&o.exhaustive||!1;return{type:t,attributeName:r,name:a,count:h,exhaustive:d}}function yi(e,t,r,a){var n=e.getHierarchicalFacetByName(t),o=e._getHierarchicalFacetSeparator(n),h=r.split(o),d=K(a,function(_){return _.name===t}),l=h.reduce(function(_,F){var A=_&&K(_.data,function(D){return D.name===F});return A!==void 0?A:_},d),p=l&&l.count||0,g=l&&l.exhaustive||!1,y=l&&l.path||"";return{type:"hierarchical",attributeName:t,name:y,count:p,exhaustive:g}}var zt=Y,Ri=function(t){return t.reduce(function(r,a){return r.concat(a)},[])},Fi=ge,bi=Ri;function ji(e,t){var r=[];return Object.keys(e).forEach(function(a){e[a].count<2&&(e[a].indexSum+=100),r.push({objectID:a,avgOfIndices:e[a].indexSum/t})}),r.sort(function(a,n){return a.avgOfIndices>n.avgOfIndices?1:-1})}function Pi(e){var t={};e.forEach(function(n){n.forEach(function(o,h){t[o.objectID]?t[o.objectID]={indexSum:t[o.objectID].indexSum+h,count:t[o.objectID].count+1}:t[o.objectID]={indexSum:h,count:1}})});var r=ji(t,e.length),a=r.reduce(function(n,o){var h=Fi(bi(e),function(d){return d.objectID===o.objectID});return h?n.concat(h):n},[]);return a}var xi=Pi,Wt="3.22.3",_i=Dt,Oi=Sn,Ei=We.escapeFacetValue,wi=At,Ii=xe,Ti=Ge,Di=Xe,Kt=Ht,Si=Nt,ce=Cn,et=qt,Ue=zt,Ai=xi,Gt=Wt;function R(e,t,r,a){typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+Gt+")"),this.setClient(e);var n=r||{};n.index=t,this.state=et.make(n),this.recommendState=new Kt({params:n.recommendState}),this.lastResults=null,this.lastRecommendResults=null,this._queryId=0,this._recommendQueryId=0,this._lastQueryIdReceived=-1,this._lastRecommendQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._currentNbRecommendQueries=0,this._searchResultsOptions=a,this._recommendCache={}}wi(R,_i);R.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};R.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};R.prototype.recommend=function(){return this._recommend(),this};R.prototype.getQuery=function(){var e=this.state;return ce._getHitsSearchParams(e)};R.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,a=ce._getQueries(r.index,r),n=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),t){this.client.search(a).then(function(o){n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),t(null,new Ue(r,o.results),r)}).catch(function(o){n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),t(o,null,r)});return}return this.client.search(a).then(function(o){return n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),{content:new Ue(r,o.results),state:r,_originalResponse:o}},function(o){throw n._currentNbQueries--,n._currentNbQueries===0&&n.emit("searchQueueEmpty"),o})};R.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var a=r.getModifiedState(t),n=Ii({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:Di(ce._getHitsSearchParams(a),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),o="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(o);var h=this.client.initIndex(a.index);if(typeof h.findAnswers!="function")throw new Error(o);return h.findAnswers(a.query,e.queryLanguages,n)};R.prototype.searchForFacetValues=function(e,t,r,a){var n=typeof this.client.searchForFacetValues=="function",o=typeof this.client.initIndex=="function";if(!n&&!o&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var h=this.state.setQueryParameters(a||{}),d=h.isDisjunctiveFacet(e),l=ce.getSearchForFacetQuery(e,t,r,h);this._currentNbQueries++;var p=this,g;return n?g=this.client.searchForFacetValues([{indexName:h.index,params:l}]):o?g=this.client.initIndex(h.index).searchForFacetValues(l):(delete l.facetName,g=this.client.search([{type:"facet",facet:e,indexName:h.index,params:l}]).then(function(_){return _.results[0]})),this.emit("searchForFacetValues",{state:h,facet:e,query:t}),g.then(function(_){return p._currentNbQueries--,p._currentNbQueries===0&&p.emit("searchQueueEmpty"),_=Array.isArray(_)?_[0]:_,_.facetHits.forEach(function(F){F.escapedValue=Ei(F.value),F.isRefined=d?h.isDisjunctiveFacetRefined(e,F.escapedValue):h.isFacetRefined(e,F.escapedValue)}),_},function(y){throw p._currentNbQueries--,p._currentNbQueries===0&&p.emit("searchQueueEmpty"),y})};R.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this};R.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this};R.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};R.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};R.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this};R.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};R.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this};R.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};R.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this};R.prototype.addFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.addFrequentlyBoughtTogether(e)}),this};R.prototype.addRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.addRelatedProducts(e)}),this};R.prototype.addTrendingItems=function(e){return this._recommendChange({state:this.recommendState.addTrendingItems(e)}),this};R.prototype.addTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.addTrendingFacets(e)}),this};R.prototype.addLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.addLookingSimilar(e)}),this};R.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this};R.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};R.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this};R.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};R.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this};R.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};R.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this};R.prototype.removeFrequentlyBoughtTogether=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this};R.prototype.removeRelatedProducts=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this};R.prototype.removeTrendingItems=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this};R.prototype.removeTrendingFacets=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this};R.prototype.removeLookingSimilar=function(e){return this._recommendChange({state:this.recommendState.removeParams(e)}),this};R.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};R.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)};R.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this};R.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};R.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this};R.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)};R.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)};function Xt(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}R.prototype.setCurrentPage=Xt;R.prototype.setPage=Xt;R.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this};R.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this};R.prototype.setState=function(e){return this._change({state:et.make(e),isPageReset:!1}),this};R.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new et(e),this};R.prototype.hasRefinements=function(e){return Ti(this.state.getNumericRefinements(e))?!0:this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):this.state.isHierarchicalFacet(e)?this.state.isHierarchicalFacetRefined(e):!1};R.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)};R.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)};R.prototype.hasTag=function(e){return this.state.isTagRefined(e)};R.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};R.prototype.getIndex=function(){return this.state.index};function Yt(){return this.state.page}R.prototype.getCurrentPage=Yt;R.prototype.getPage=Yt;R.prototype.getTags=function(){return this.state.tagRefinements};R.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var r=this.state.getConjunctiveRefinements(e);r.forEach(function(h){t.push({value:h,type:"conjunctive"})});var a=this.state.getExcludeRefinements(e);a.forEach(function(h){t.push({value:h,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var n=this.state.getDisjunctiveRefinements(e);n.forEach(function(h){t.push({value:h,type:"disjunctive"})})}var o=this.state.getNumericRefinements(e);return Object.keys(o).forEach(function(h){var d=o[h];t.push({value:d,operator:h,type:"numeric"})}),t};R.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)};R.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)};R.prototype._search=function(e){var t=this.state,r=[],a=[];e.onlyWithDerivedHelpers||(a=ce._getQueries(t.index,t),r.push({state:t,queriesCount:a.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var n=this.derivedHelpers.map(function(d){var l=d.getModifiedState(t),p=l.index?ce._getQueries(l.index,l):[];return r.push({state:l,queriesCount:p.length,helper:d}),d.emit("search",{state:l,results:d.lastResults}),p}),o=Array.prototype.concat.apply(a,n),h=this._queryId++;if(this._currentNbQueries++,!o.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,r,h));try{this.client.search(o).then(this._dispatchAlgoliaResponse.bind(this,r,h)).catch(this._dispatchAlgoliaError.bind(this,h))}catch(d){this.emit("error",{error:d})}};R.prototype._recommend=function(){var e=this.state,t=this.recommendState,r=this.getIndex(),a=[{state:t,index:r,helper:this}],n=t.params.map(function(p){return p.$$id});this.emit("fetch",{recommend:{state:t,results:this.lastRecommendResults}});var o=this._recommendCache,h=this.derivedHelpers.map(function(p){var g=p.getModifiedState(e).index;if(!g)return[];var y=p.getModifiedRecommendState(new Kt);return a.push({state:y,index:g,helper:p}),n=Array.prototype.concat.apply(n,y.params.map(function(_){return _.$$id})),p.emit("fetch",{recommend:{state:y,results:p.lastRecommendResults}}),y._buildQueries(g,o)}),d=Array.prototype.concat.apply(this.recommendState._buildQueries(r,o),h);if(d.length!==0){if(d.length>0&&typeof this.client.getRecommendations>"u"){console.warn("Please update algoliasearch/lite to the latest version in order to use recommend widgets.");return}var l=this._recommendQueryId++;this._currentNbRecommendQueries++;try{this.client.getRecommendations(d).then(this._dispatchRecommendResponse.bind(this,l,a,n)).catch(this._dispatchRecommendError.bind(this,l))}catch(p){this.emit("error",{error:p})}}};R.prototype._dispatchAlgoliaResponse=function(e,t,r){var a=this;if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var n=r.results.slice();e.forEach(function(o){var h=o.state,d=o.queriesCount,l=o.helper,p=n.splice(0,d);if(!h.index){l.emit("result",{results:null,state:h});return}l.lastResults=new Ue(h,p,a._searchResultsOptions),l.emit("result",{results:l.lastResults,state:h})})}};R.prototype._dispatchRecommendResponse=function(e,t,r,a){if(!(e<this._lastRecommendQueryIdReceived)){this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this._currentNbRecommendQueries===0&&this.emit("recommendQueueEmpty");var n=this._recommendCache,o={};r.filter(function(d){return n[d]===void 0}).forEach(function(d,l){o[d]||(o[d]=[]),o[d].push(l)}),Object.keys(o).forEach(function(d){var l=o[d],p=a.results[l[0]];if(l.length===1){n[d]=p;return}n[d]=Object.assign({},p,{hits:Ai(l.map(function(g){return a.results[g].hits}))})});var h={};r.forEach(function(d){h[d]=n[d]}),t.forEach(function(d){var l=d.state,p=d.helper;if(!d.index){p.emit("recommend:result",{results:null,state:l});return}p.lastRecommendResults=new Si(l,h),p.emit("recommend:result",{recommend:{results:p.lastRecommendResults,state:l}})})}};R.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};R.prototype._dispatchRecommendError=function(e,t){e<this._lastRecommendQueryIdReceived||(this._currentNbRecommendQueries-=e-this._lastRecommendQueryIdReceived,this._lastRecommendQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbRecommendQueries===0&&this.emit("recommendQueueEmpty"))};R.prototype.containsRefinement=function(e,t,r,a){return e||t.length!==0||r.length!==0||a.length!==0};R.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0};R.prototype._change=function(e){var t=e.state,r=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:r}))};R.prototype._recommendChange=function(e){var t=e.state;t!==this.recommendState&&(this.recommendState=t,this.emit("recommend:change",{search:{results:this.lastResults,state:this.state},recommend:{results:this.lastRecommendResults,state:this.recommendState}}))};R.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};R.prototype.setClient=function(e){return this.client===e?this:(typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+Gt+")"),this.client=e,this)};R.prototype.getClient=function(){return this.client};R.prototype.derive=function(e,t){var r=new Oi(this,e,t);return this.derivedHelpers.push(r),r};R.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(t===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)};R.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Hi=R,Zt=Hi,Ni=Ht,Qi=Nt,ki=qt,qi=zt;function te(e,t,r,a){return new Zt(e,t,r,a)}te.version=Wt;te.AlgoliaSearchHelper=Zt;te.SearchParameters=ki;te.RecommendParameters=Ni;te.SearchResults=qi;te.RecommendResults=Qi;var Ci=te;const $i=It(Ci);function er(e){let t="";const r=Math.floor(e);for(let a=0;a<r;a++)t+='<span class="star">&#9733;</span>';return t}function Bi(e,t){for(const r in e.results.hits)t.innerHTML+=`
      <br>
      <div class="row">
       <div class="col-md-1">
         <img src="${e.results.hits[r].image_url}" class="img-fluid" alt="Image of ${e.results.hits[r].name}">
       </div>
       <div class="col-md-7">
         <div class="card-body">
           <h5 class="card-title">${e.results.hits[r].name}</h5>
           <div class="card-text">
              <span class="rating">${e.results.hits[r].stars_count}</span>
             ${er(e.results.hits[r].stars_count)}
             <span class="review-number">(${e.results.hits[r].reviews_count})</span>
           </div>
           <p class="card-text result-info">
           ${e.results.hits[r].food_type} 
           | 
           ${e.results.hits[r].neighborhood}
           | 
           ${e.results.hits[r].price_range}
           </p>
         </div>
       </div>
       <div class="col-md-2 d-flex align-items-center">
            <a href="${e.results.hits[r].reserve_url}" target="_blank" class=" btn btn-primary">Reserve</a>
        </div>
      </div>
      `}function Li(e,t){t.innerHTML="";const r=JSON.stringify(e.results.getFacetValues("payment_options")),a=JSON.parse(r);let n="";a.forEach(o=>{n+=`
      <div class="form-check">
      <input class="form-check-input" type="checkbox" value="${o.name}" id="${o.name}">
      <label class="form-check-label" for="paymentType">${o.name}</label>
      </div>
      `}),t.innerHTML+=n}function Mi(e,t){t.innerHTML="";const r=JSON.stringify(e.results.getFacetValues("food_type")),a=JSON.parse(r);let n="";a.forEach(o=>{n+=`<li class="list-group-item" value="${o.name}"> ${o.name} <span class="badge text-bg-secondary food-type-count">${o.count}</span></li>`}),t.innerHTML+=n}function Vi(e){e.innerHTML="";let t="";for(let r=1;r<6;r++)t+=`<li class="list-group-item rating-star" value=${r}> ${er(r)}</li>`;e.innerHTML+=t}const Ui="KO745I5TAW",Ji="5a7608529601ef0295f8947d071ce949",zi="Restaurants",Wi=En(Ui,Ji),_e=$i(Wi,zi,{facets:["food_type","payment_options"],maxValuesPerFacet:10});let Je=0;const Ki=document.getElementById("search-input"),ze=document.getElementById("results-container"),xt=document.getElementById("payment-conatiner"),_t=document.getElementById("food-type-container"),Ot=document.getElementById("star-rating-container"),Et=document.getElementById("results-hits"),wt=document.getElementById("response-time");_e.setQuery("").setPage(Je).search();Gi(_e);document.addEventListener("keyup",function(e){e.preventDefault(),ze.innerHTML="",_e.setQuery(Ki.value).search()});document.getElementById("load-more").addEventListener("click",e=>{e.preventDefault(),Je+=1,_e.setPage(Je).search()});function Gi(e){e.on("result",function(t){if(t.results.hits.length===0){Et.innerHTML="0",wt.innerHTML=t.results.processingTimeMS/1e3,ze.innerHTML="No Results Found",xt.innerHTML="No Payment Options Found",_t.innerHTML="No Food Options Found",Ot.innerHTML="No Ratings Found";return}Et.innerHTML=t.results.nbHits,wt.innerHTML=t.results.processingTimeMS/1e3,Bi(t,ze),Li(t,xt),Mi(t,_t),Vi(Ot)}),e.on("error",t=>{console.error("Algolia Search Error:",t)})}
